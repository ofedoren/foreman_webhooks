<% title _('Webhook Payload Templates') %>

<% title_actions new_link(_('Create Template')) %>

<table class="<%= table_css_classes 'table-fixed' %>">
  <thead>
    <tr>
      <th class="col-md-3"><%= sort :name, as: s_('PayloadTemplate|Name') %></th>
      <th class="col-md-1"><%= sort :snippet, as: s_('PayloadTemplate|Snippet') %></th>
      <th class="col-md-1"><%= sort :locked, as: s_('PayloadTemplate|Locked'), default: 'DESC' %></th>
      <th class="col-md-1"><%= _('Actions') %></th>
    </tr>
  </thead>
  <tbody>
    <% for payload_template in @templates %>
    <tr>
        <td class="ellipsis"><%= link_to_if_authorized payload_template,
                                   hash_for_edit_payload_template_path(id: payload_template.to_param).
                                     merge(auth_object: payload_template, authorizer: authorizer, permission: 'edit_payload_templates') %>
        </td>
        <td align='center'><%= checked_icon payload_template.snippet %></td>
        <td align='center'><%= locked_icon payload_template.locked?, _('This template is locked for editing.') %>
        </td>
        <td><%= action_buttons(*permitted_actions(payload_template)) %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= will_paginate_with_info @templates %>
